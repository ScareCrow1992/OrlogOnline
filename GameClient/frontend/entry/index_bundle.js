let e,t={};const n={ChangeScore_Single:(e,n)=>{if(0==window.rankgame)return;let i=t.play.getElementsByClassName("rank-score-style"),o=null;switch(n){case"constant":o=0;break;case"liberty":o=1;break;case"draft":o=2}let a=parseInt(i[o].innerText),l=a;return a+=e,(e>0||e<0&&a>=100)&&(i[o].innerText=a),l},ChangeScore:e=>{let n=t.play.getElementsByClassName("rank-score-style");n[0].innerText=e.constant,n[1].innerText=e.liberty,n[2].innerText=e.draft},SavePage:(e,n)=>{t[`${e}`]=n},LoadPage:e=>t[`${e}`],InitialView:t=>{e=t},ConvertView:n=>{let i=t[`${n}`];for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(i)}};let i={};const o=(e,t)=>{i[`${e}`]=t},a=(e,t)=>{i[`${e}`].addEventListener("click",(n=>{t(e)}))};let l=document.getElementById("match-alert");function s(){l.classList.remove("visible")}let c=null,d=null;function r(e,t){return function(e,t="liberty"){const n={headers:{Authorization:`Bearer ${c}`}},i={key:"value",game_mode:t};return axios.post(`${window.config.HTTP}://${window.config["game-client"]}/auth/`+e,i,n)}(e,t)}window.onload=function(){window.Play_Buttons_Active()},document.getElementById("setting-signout").addEventListener("click",(()=>{google.accounts.id.disableAutoSelect()}));class w{constructor(e,t,n){this.req=n,this.Connect_SocketServer(e,t),this.state="waiting"}Disconnect_OnWaiting(){"playing"!==this.state&&this.ws.close()}Connect_SocketServer(e,t){let n=`${window.config.WS}://${window.config["socket-server"]}/ws?token=${e}`;this.ws=new WebSocket(n),this.SetState("requested"),this.ws.onmessage=e=>{let t=e.data;if("playing"==this.state)this.partnerbird.Transport(t);else{let e=JSON.parse(t);if("MatchSuccess"==e)this.state="playing",window.OnlineMode(this),this.send("prepared");else if("gamestart"==this.req)console.log(`[ matching fail ] ${e}`);else switch(e.msg){case"CreateLobby_On":window.CreateLobby_On(e.param,(()=>{this.Disconnect_OnWaiting()}));break;case"JoinLobby_On":window.JoinLobby_On(e.param,(()=>{this.Disconnect_OnWaiting()}));break;case"JoinGuest":window.JoinGuest(e.param,(e=>{this.Start_FriendlyGame(e)}))}}},this.ws.onerror=e=>{console.log(e)},this.ws.onclose=e=>{window.Play_Buttons_Active(),t(e)}}Start_FriendlyGame(e){this.send(JSON.stringify({func:"Start_FriendlyGame",gamemode:e}))}PrepareGame(e){this.partnerbird=e}SetState(e){this.state=e}send(e){1==this.ws.readyState&&this.ws.send(e)}BellPushed(e){this.ws.send(e)}}const y=JSON.parse('{"menu-button-play":{"en":"Play","kr":"플레이"},"menu-button-guide":{"en":"Guide","kr":"가이드"},"menu-button-news":{"en":"News","kr":"뉴스"},"menu-button-about":{"en":"About","kr":"소개"},"menu-button-lobby":{"en":"Lobby","kr":"친선전"},"menu-button-contact":{"en":"Contact","kr":"연락"},"home-play-block-desc":{"en":"Choise the game mode that play want.","kr":"원하는 게임 모드를 선택합니다."},"token-description":{"en":"Gain 1 <span class=\\"token-text\\">⌘</span>.","kr":"<span class=\\"token-text\\">⌘</span> 을 1개 얻습니다."},"additional-input-bottom":{"en":"additional input","kr":"추가 입력"},"additional-input-top":{"en":"additional input","kr":"추가 입력"},"home-desc":{"en":"<p>Orlog is a mini game of Assasin\'s Creed Valhalla. It\'s abstract strategy board game where two players compete with dices and Godfavor cards with unique abilities.</p><p>orlog.io is an unofficial fan-made adaptation of the game. Unlike the original game, which was only able to compete against NPCs, it is an online game that can enjoy with users from all over the world!</p><p>It\'s completely free to play.</p>","kr":"<p>올로그는 어쌔신 크리드 발할라의 인게임 컨텐츠로, 고유한 능력을 지닌 신의 은총 카드와 주사위를 사용하여 두 플레이어가 겨루는 추상전략 보드게임입니다.</p><p>orlog.io는 이를 각색하여 만든 비공식 팬메이드 게임이며, 오직 게임내 NPC와의 플레이만 가능했던 원작과 달리 전세계 유저들과 즐길 수 있는 온라인 게임입니다.</p><p>지금 당장 무료로 즐겨보세요!</p>"}}');history.pushState({page_id:1,data:"test"},null,"/"),window.lang_="en",window.language_convert_=function(e){Object.keys(y).forEach((t=>{let n=document.getElementById(t);n&&(n.innerHTML=y[`${t}`][`${e}`])}))},document.getElementById("setting-language").addEventListener("click",(()=>{window.lang_="en"===window.lang_?"kr":"en",window.language_convert_(window.lang_)}));let u=document.getElementById("webpage-root"),g=document.getElementById("game-canvas"),b=document.getElementById("view"),m=document.getElementById("blackout"),h=document.getElementById("notice-block"),p=document.getElementById("notice-description"),f=document.getElementById("check-wrapper");function v(){m.style.opacity="0.0",h.classList.remove("visible"),f.style.display="none"}g.style.display="none",window.BlackOn=function(){let e=m.style.opacity;v(),s(),m.classList.remove("inactive");let t=m.animate([{opacity:`${e}`},{opacity:"1.0"}],{duration:1e3});return t.finished.then((()=>{m.style.opacity="1.0"})),t.finished},window.BlackOff=function(){f.style.display="none",m.classList.add("inactive");let e=m.animate([{opacity:`${m.style.opacity}`},{opacity:"0.0"}],{duration:1e3});return e.finished.then((()=>{m.style.opacity="0.0"})),e.finished},window.GameScreenOn=function(){u.style.display="none",g.style.display="",window.screen_mode="game"},window.GameScreenOff=function(){u.style.display="",g.style.display="none",window.screen_mode="browser"},window.NoticeMatchJoinOn=function(){m.style.opacity="0.7",p.innerText="The Match Is Ready",h.classList.add("visible")},window.NoticeMatchJoinOff=v,window.CancleMatchWaiting=_,window.PrepareMatch=function(){f.style.display="inline-block"},window.config={"game-client":"localhost:3000","socket-server":"localhost:7500","static-storage":"storage.orlog.io",HTTP:"http",WS:"ws"},window.screen_mode="browser",window.PageAdmin=n,window.addEventListener("keydown",(e=>{"t"==e.key&&(u.style.display="none"==u.style.display?"":"none",g.style.display="none"==g.style.display?"":"none")})),o("home",document.getElementById("logo"));let k=document.getElementsByClassName("menu-button");function _(){s(),null!=S&&S()}o("play",k[0]),o("guide",k[1]),o("news",k[2]),o("about",k[3]),o("lobby",k[4]),o("contact",k[5]),o("profile",document.getElementById("user_profie_wrapper")),n.InitialView(b),o("match-cancle-button",document.getElementById("match-cancle-button")),a("match-cancle-button",_);let S=null;function L(e,t){var n=document.createElement("div");return n.classList.add(t),n.innerHTML=e.trim(),n}function E(e,t,n){let i;window.rankgame=n;let o=new Promise((e=>{i=e}));return r(e,t).then((t=>{let n=t.data;null!=n&&(d=n,function(e,t){let n=new w(e,(e=>{window.HideLobby&&window.HideLobby(),S=null}),t);S=()=>{n.Disconnect_OnWaiting()}}(n,e)),i(n)})),o}axios.get(`${window.config.HTTP}://${window.config["game-client"]}/html/home.html`).then((e=>{let t=L(e.data,"view-home");b.appendChild(t),n.SavePage("home",t),a("home",(e=>{n.ConvertView(e)}))})),axios.get(`${window.config.HTTP}://${window.config["game-client"]}/html/play.html`).then((e=>{let t=L(e.data,"view-play");n.SavePage("play",t),a("play",(e=>{n.ConvertView(e)}));let i=t.getElementsByClassName("content-block-button-rankgame"),o=[i[0],i[1],i[2]],s=["constant","liberty","draft"];[0,1,2].forEach(((e,t)=>{let n=i[`${e}`],o=s[t];n.addEventListener("click",(()=>{window.Play_Buttons_Inactive(),E("gamestart",o,!0).then((e=>{l.classList.add("visible")}))}))})),window.Play_Buttons_Active=function(){o.forEach((e=>{e.style.backgroundImage="",e.style.pointerEvents="",e.style.userSelect=""}))},window.Play_Buttons_Inactive=function(){o.forEach((e=>{e.style.backgroundImage="none",e.style.backgroundColor="#888888",e.style.pointerEvents="none",e.style.userSelect="none"}))},window.Play_Buttons_Inactive()})),axios.get(`${window.config.HTTP}://${window.config["game-client"]}/html/about.html`).then((e=>{let t=L(e.data,"view-about");n.SavePage("about",t),a("about",(e=>{n.ConvertView(e)}))})),axios.get(`${window.config.HTTP}://${window.config["game-client"]}/html/guide.html`).then((e=>{let t=L(e.data,"view-guide");n.SavePage("guide",t),a("guide",(e=>{n.ConvertView(e)})),window.guide_page_dom=t})),axios.get(`${window.config.HTTP}://${window.config["game-client"]}/html/lobby.html`).then((e=>{let t=L(e.data,"view-lobby");n.SavePage("lobby",t),a("lobby",(e=>{n.ConvertView(e)})),window.LobbySelect=t.children[0],window.LobbyWaiting=t.children[1];let i=t.querySelector("#lobby-master-name"),o=t.querySelector("#lobby-guest-name"),l=t.querySelector("#input-join-lobby-token"),s=t.querySelectorAll("#lobby-waiting .content-block-button");s.forEach((e=>{e.style.background="#888888",e.style.pointerEvents="none",e.style.userSelect="none"}));let c=window.LobbyWaiting.children[2],d=t.querySelector("#lobby-number-copy-icon"),r=t.querySelector("#lobby-exit-button");d.addEventListener("click",(e=>{navigator.clipboard.writeText(c.value)})),t.querySelector("#lobby-button-create").addEventListener("click",(()=>{E("createlobby","constant",!1)})),window.LobbyWaiting.style.display="none";let w=null;function y(){null!=this.exit_callback&&(this.exit_callback(),this.exit_callback=null),window.Play_Buttons_Inactive(),u()}function u(){c.value="",i.innerText="",o.innerText="",r.removeEventListener("click",y),s.forEach(((e,t)=>{e.style.background="#888888",e.style.pointerEvents="none",e.style.userSelect="none"})),window.LobbySelect.style.display="none"==window.LobbySelect.style.display?"":"none",window.LobbyWaiting.style.display="none"==window.LobbyWaiting.style.display?"flex":"none"}window.CreateLobby_On=(e,t)=>{u(),window.Play_Buttons_Inactive(),c.value=e,i.innerText=window.user_name,w=t,r.exit_callback=t,r.addEventListener("click",y)},window.JoinLobby_On=(e,t)=>{u(),window.Play_Buttons_Inactive(),i.innerText=e,o.innerText=window.user_name,w=t,r.exit_callback=t,r.addEventListener("click",y)},window.JoinGuest=(e,t)=>{o.innerText=e;let n=["constant","liberty","draft"];s.forEach(((e,i)=>{e.style.background="#3FC0AC",e.style.pointerEvents="",e.style.userSelect="";let o=n[i];e.addEventListener("click",(()=>{t(o)}))}))},t.querySelector("#lobby-button-join").addEventListener("click",(()=>{E("joinlobby",l.value,!1)})),window.ShowLobby=function(){window.LobbySelect.style.display="none",window.LobbyWaiting.style.display="flex"},window.HideLobby=function(){window.LobbySelect.style.display="",window.LobbyWaiting.style.display="none"}})),axios.get(`${window.config.HTTP}://${window.config["game-client"]}/html/contact.html`).then((e=>{let t=L(e.data,"view-contact");n.SavePage("contact",t),a("contact",(e=>{n.ConvertView(e)}))}));let B=document.getElementById("match-alert");document.addEventListener("keydown",(e=>{"c"==e.key&&B.classList.add("visible"),"v"==e.key&&B.classList.remove("visible")}));let C=document.getElementsByClassName("lds-dual-ring")[0],P=Date.now(),T=0;!function e(){let t=Date.now()-P;P=Date.now(),T+=.3*t,T>360&&(T-=360),C.style.transform=`rotate(${T}deg)`,window.requestAnimationFrame((()=>{e()}))}();